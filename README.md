# 微信智能聊天机器人

这是一个基于Python开发的微信智能聊天机器人，能够根据用户需求自定义配置知识库，识别用户对话，并将问题发送给大模型进行处理。机器人会优先从知识库中检索答案，如果没有找到匹配内容，则通过大模型生成回复。

## 项目地址

**GitHub仓库**: [https://github.com/ALLEN-yzz/WeiXin_ChatBot](https://github.com/ALLEN-yzz/WeiXin_ChatBot)

**项目文件夹**: `WeiXin_ChatBot-main`

## 核心功能

- **智能对话处理**：实时监听微信消息并自动回复
- **知识库检索**：根据关键词和地区权重优先从知识库中匹配答案
- **大模型集成**：当知识库中没有相关内容时，调用DeepSeek等大模型生成回复
- **自定义监听配置**：可指定监听特定联系人或群组
- **地区权重匹配**：支持省份、城市、区县三级地区名称匹配，提高匹配准确率

## 项目结构

```
├── WeChatBot copy.py                # 主程序文件
├── sampling_knowledge_base_example.json  # 示例知识库文件
├── .gitignore                       # Git忽略文件配置
├── requirements.txt                 # 项目依赖
├── README.md                        # 项目说明文档
└── WeChatSetup.exe                  # 特定版本微信安装程序
```

## 技术栈

- **Python 3.7+**
- **wxauto** - 微信自动操作库
- **pywin32** - Windows系统交互
- **OpenAI API** - 大模型接口
- **JSON** - 知识库数据存储格式

## 安装部署

### 前置要求

- Windows操作系统
- Python 3.7或更高版本
- 使用项目提供的特定版本微信客户端

### 安装步骤

1. **克隆GitHub仓库**
   ```bash
   git clone https://github.com/ALLEN-yzz/WeiXin_ChatBot.git WX_ChatBot
   cd WeiXin_ChatBot-main
   ```

2. **安装特定版本微信**
   - 运行项目目录中的`WeChatSetup.exe`安装特定版本的微信客户端
   - 注意：必须使用此特定版本以确保与wxauto库的兼容性

3. **安装Python依赖**
    ```bash
    pip install -r requirements.txt
    ```

4. **配置API密钥**
    - 打开`WeChatBot copy.py`文件
    - 找到OpenAI客户端初始化部分，更新API密钥和基础URL（推荐使用deepseek的api）
    - 确保使用正确的API密钥以访问大模型服务

## 配置说明

### 1. 监听人员名称配置

在`WeChatBot copy.py`文件中，您可以配置需要监听的联系人或群组：

```python
# 可以监听特定联系人或群组，或使用空列表监听所有
self.listen_list = [
    "你所监听用户的昵称或群名"
]  # 空列表表示监听所有联系人
```

### 2. 自定义知识库配置

项目支持通过JSON文件自定义知识库内容。以下是配置步骤：

1. **创建知识库文件**
   - 将`sampling_knowledge_base_example.json`复制并重命名为`sampling_knowledge_base.json`
   - 或者在代码中修改`KNOWLEDGE_BASE_FILE`变量指向您的自定义知识库文件

2. **编辑知识库内容**
   ```json
   {
     "knowledge_items": [
       {
         "question": "问题文本",
         "answer": "答案文本，换行使用\n"
       },
       {
         "question": "另一个问题",
         "answer": "另一个答案"
       }
     ]
   }
   ```

3. **优化匹配效果**
   - 问题中建议包含明确的关键词或地区名称
   - 系统会自动对包含地区名称的问题提高匹配权重

## 使用方法

1. **启动微信客户端**
   - 确保已登录您的微信账号
   - 保持微信窗口在桌面可见

2. **运行机器人程序**
   ```bash
   python "WeChatBot copy.py"
   ```

3. **与机器人交互**
   - 向配置好的监听联系人或群组发送消息
   - 机器人会自动接收消息并根据知识库或大模型生成回复

## 工作流程

1. **消息监听**：机器人实时监听配置的联系人或群组消息
2. **知识库检索**：收到消息后，首先尝试从知识库中检索答案
3. **大模型处理**：如果知识库中没有匹配内容，则将问题发送给大模型
4. **自动回复**：将检索到的答案或大模型生成的回复自动发送给用户

## 示例使用场景

- **客户服务**：根据预设知识库自动回答常见问题
- **信息查询**：提供特定领域的知识查询服务
- **智能助手**：结合大模型提供更灵活的对话能力
- **特定行业应用**：可根据行业需求定制知识库内容

## 注意事项

1. **微信版本兼容性**
   - 必须使用项目提供的特定版本微信客户端
   - 不同版本的微信可能导致自动化功能失效

2. **API密钥保护**
   - 请妥善保管您的API密钥，避免泄露
   - 建议使用环境变量或配置文件管理敏感信息

3. **运行环境要求**
   - 程序运行时需要保持微信窗口在桌面可见
   - 确保系统权限足够，允许程序自动化操作微信

4. **知识库格式**
   - 确保JSON格式严格正确，特别是字符串使用双引号
   - 多行文本使用`\n`转义换行符

## 声明
1. **免责条款**：本项目仅供学习和技术研究使用，不得用于任何商业用途或非法活动。使用本项目产生的任何后果由使用者自行承担。

2. **第三方依赖**：本项目使用了多个第三方库和服务，包括但不限于wxauto、pywin32等。对于这些第三方组件的使用，应遵守各自的许可证条款。

3. **隐私保护**：本项目在处理微信消息时，请确保遵守相关法律法规对用户隐私的保护要求，不得未经授权收集、存储或传播用户的个人信息。

4. **内容责任**：用户通过本项目提供的知识库或大模型生成的内容，其准确性、合法性和适当性由知识库提供者和用户自行负责。

5. **微信合规**：使用本项目必须遵守微信的用户协议和相关规定，不得利用本项目干扰微信的正常运行或侵犯其他用户的合法权益。

6. **责任限制**：此项目仅供娱乐，项目开发者不对因使用本项目而导致的任何直接或间接损失承担责任。

7. **许可使用**：本项目遵循开源许可协议，使用者在使用、修改或分发本项目时，应遵守相应的开源协议条款。

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request来改进这个项目！
